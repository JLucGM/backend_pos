const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductsForm-BfBNvmDC.js","assets/app-CYVY2MFy.js","assets/app-DoXMhKli.css","assets/react-select.esm-D7UQAlQy.js","assets/index-N2-1msIn.js","assets/floating-ui.dom-D83--fCt.js","assets/InputError-53vOLuq7.js","assets/InputLabel-CIYrKAXw.js","assets/TextInput-BWiVkwpI.js","assets/button-BnGadHox.js","assets/index--pcfpu6k.js","assets/index-Cb8geMzt.js","assets/utils-Dj5kSLHa.js","assets/div-section-CX5cXRyK.js","assets/index-Bzw9XhBZ.js","assets/table-BdBwOT2-.js","assets/input-GddPy1dC.js","assets/Checkbox-D_VMJ2ki.js","assets/isEqual-BZWqVagx.js","assets/TrashIcon-DYWxodWJ.js","assets/circle-plus-PJ73piNK.js","assets/createLucideIcon-Bc10GapS.js","assets/ProductsForm-DZrYvFpI.css"])))=>i.map(i=>d[i]);
import{G as E,j as s,x as m,S as N,r as p,_ as z}from"./app-CYVY2MFy.js";import{A as D}from"./AuthenticatedLayout-YTXnvr9x.js";import{B as _,b as S}from"./button-BnGadHox.js";import{t as n}from"./index-Bzw9XhBZ.js";import{B}from"./badge-B1nmtUfX.js";import{L as F}from"./loader-C4Qm2rou.js";import{F as L}from"./ArrowLongLeftIcon-CIXXkMix.js";import{F as R}from"./TrashIcon-DYWxodWJ.js";import"./index--pcfpu6k.js";import"./index-Cb8geMzt.js";import"./utils-Dj5kSLHa.js";import"./input-GddPy1dC.js";import"./avatar-90w83cKR.js";import"./index-N2-1msIn.js";import"./createLucideIcon-Bc10GapS.js";import"./floating-ui.dom-D83--fCt.js";const w=p.lazy(()=>z(()=>import("./ProductsForm-BfBNvmDC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])));function X({product:t,taxes:x,categories:b,stores:f,combinationsWithPrices:a}){const j=t.categories.map(e=>e.id),r={};t.combinations.forEach(e=>{e.combination_attribute_value.forEach(i=>{if(i.attribute_value&&i.attribute_value.attribute){const c=i.attribute_value.attribute.attribute_name,l=i.attribute_value.attribute_value_name;r[c]||(r[c]=[]),r[c].includes(l)||r[c].push(l)}})});const o={product_name:t.product_name,product_description:t.product_description,product_price:t.product_price||"0",product_price_discount:t.product_price_discount,tax_id:t.tax_id,status:t.status,product_status_pos:t.product_status_pos,product_sku:t.stocks[0].combination_id==null?t.stocks[0].product_sku:"",product_barcode:t.stocks[0].combination_id==null?t.stocks[0].product_barcode:"",categories:j,quantity:t.stocks&&t.stocks.length>0?t.stocks[0].quantity:0,store_id:t.stocks&&t.stocks.length>0?t.stocks[0].store_id:null,attribute_names:Object.keys(r),attribute_values:Object.values(r),prices:a,stocks:{},barcodes:{},skus:{}};for(const e in a)o.stocks[e]=a[e].stock||0,o.barcodes[e]=a[e].product_barcode||"",o.skus[e]=a[e].product_sku||"";const{data:h,setData:k,errors:v,post:u,processing:d}=E(o),g=e=>{e.preventDefault(),u(route("products.update",t),{onSuccess:()=>{n("Producto actualizado con éxito.")},onError:()=>{n.error("Error al actualizar el producto.")}})},y=()=>{u(route("products.duplicate",t),{onSuccess:()=>{n("Producto actualizado con éxito.")},onError:()=>{n.error("Error al actualizar el producto.")}})};return s.jsxs(D,{header:s.jsxs("div",{className:"flex justify-between items-center ",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{href:route("products.index"),children:s.jsx(L,{className:"size-6"})}),s.jsx("h2",{className:"mx-2 capitalize font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:t.product_name}),s.jsx(B,{variant:t.status===1?"success":"info",children:t.status===1?"Publicado":"Borrador"})]}),s.jsxs("div",{className:"",children:[s.jsx(_,{variant:"ghost",onClick:y,children:"Duplicar"}),s.jsxs(m,{className:S({variant:"outlineDestructive"}),href:route("products.destroy",[t]),method:"delete",as:"button",children:[s.jsx(R,{className:"size-6"}),"Eliminar producto"]})]})]}),children:[s.jsx(N,{title:"Editar Producto"}),s.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.jsx(p.Suspense,{fallback:s.jsx(F,{}),children:s.jsx(w,{data:h,setData:k,errors:v,taxes:x,categories:b,stores:f,combinationsWithPrices:a,product:t})})}),s.jsx("div",{className:"flex justify-end p-2.5",children:s.jsx(_,{variant:"default",type:"submit",disabled:d,children:d?"Guardando...":"Guardar"})})]})})]})}export{X as default};
