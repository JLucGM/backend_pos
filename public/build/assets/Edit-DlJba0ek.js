const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductsForm-h9MtKGQ6.js","assets/app-BHQVSHMc.js","assets/app-mSara92r.css","assets/react-select.esm-DnPQgaCw.js","assets/index-P_K5OC9U.js","assets/floating-ui.dom-D83--fCt.js","assets/InputError-Dm5kGV6s.js","assets/InputLabel-BnstG7UT.js","assets/TextInput-B3-u0qF_.js","assets/button-CX1wtJqQ.js","assets/index-CH28IhmL.js","assets/index-Cb8geMzt.js","assets/utils-Dj5kSLHa.js","assets/div-section-CYAPF2s0.js","assets/index-qAUszB0N.js","assets/table-R88juMwv.js","assets/input-Bsu1HQkU.js","assets/Checkbox-DkLo5Cqh.js","assets/isEqual-BdM1X48W.js","assets/TrashIcon-B-N1zWPV.js","assets/circle-plus-C1GWLhUw.js","assets/createLucideIcon-BFfllN5R.js","assets/ProductsForm-DZrYvFpI.css"])))=>i.map(i=>d[i]);
import{G as E,j as s,x as m,S as N,r as p,_ as z}from"./app-BHQVSHMc.js";import{A as D}from"./AuthenticatedLayout-Bl7-3Q2M.js";import{B as _,b as S}from"./button-CX1wtJqQ.js";import{t as n}from"./index-qAUszB0N.js";import{B}from"./badge-C7JwEZPw.js";import{F}from"./ArrowLongLeftIcon-B5yiHGLQ.js";import{F as R}from"./TrashIcon-B-N1zWPV.js";import"./index-CH28IhmL.js";import"./index-Cb8geMzt.js";import"./utils-Dj5kSLHa.js";import"./input-Bsu1HQkU.js";import"./avatar-BQR4INv1.js";import"./index-P_K5OC9U.js";import"./createLucideIcon-BFfllN5R.js";import"./floating-ui.dom-D83--fCt.js";const w=p.lazy(()=>z(()=>import("./ProductsForm-h9MtKGQ6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])));function U({product:t,taxes:x,categories:b,stores:f,combinationsWithPrices:a}){const j=t.categories.map(e=>e.id),r={};t.combinations.forEach(e=>{e.combination_attribute_value.forEach(i=>{if(i.attribute_value&&i.attribute_value.attribute){const c=i.attribute_value.attribute.attribute_name,u=i.attribute_value.attribute_value_name;r[c]||(r[c]=[]),r[c].includes(u)||r[c].push(u)}})});const o={product_name:t.product_name,product_description:t.product_description,product_price:t.product_price||"0",product_price_discount:t.product_price_discount,tax_id:t.tax_id,status:t.status,product_status_pos:t.product_status_pos,product_sku:t.stocks[0].combination_id==null?t.stocks[0].product_sku:"",product_barcode:t.stocks[0].combination_id==null?t.stocks[0].product_barcode:"",categories:j,quantity:t.stocks&&t.stocks.length>0?t.stocks[0].quantity:0,store_id:t.stocks&&t.stocks.length>0?t.stocks[0].store_id:null,attribute_names:Object.keys(r),attribute_values:Object.values(r),prices:a,stocks:{},barcodes:{},skus:{}};for(const e in a)o.stocks[e]=a[e].stock||0,o.barcodes[e]=a[e].product_barcode||"",o.skus[e]=a[e].product_sku||"";const{data:h,setData:v,errors:k,post:d,processing:l}=E(o),g=e=>{e.preventDefault(),d(route("products.update",t),{onSuccess:()=>{n("Producto actualizado con éxito.")},onError:()=>{n.error("Error al actualizar el producto.")}})},y=()=>{d(route("products.duplicate",t),{onSuccess:()=>{n("Producto actualizado con éxito.")},onError:()=>{n.error("Error al actualizar el producto.")}})};return s.jsxs(D,{header:s.jsxs("div",{className:"flex justify-between items-center ",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{href:route("products.index"),children:s.jsx(F,{className:"size-6"})}),s.jsx("h2",{className:"mx-2 capitalize font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:t.product_name}),s.jsx(B,{variant:t.status===1?"success":"info",children:t.status===1?"Publicado":"Borrador"})]}),s.jsxs("div",{className:"",children:[s.jsx(_,{variant:"ghost",onClick:y,children:"Duplicar"}),s.jsxs(m,{className:S({variant:"outlineDestructive"}),href:route("products.destroy",[t]),method:"delete",as:"button",children:[s.jsx(R,{className:"size-6"}),"Eliminar producto"]})]})]}),children:[s.jsx(N,{title:"Editar Producto"}),s.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.jsx(p.Suspense,{fallback:s.jsx("div",{children:"Cargando formulario..."}),children:s.jsx(w,{data:h,setData:v,errors:k,taxes:x,categories:b,stores:f,combinationsWithPrices:a,product:t})})}),s.jsx("div",{className:"flex justify-end p-2.5",children:s.jsx(_,{variant:"default",type:"submit",disabled:l,children:l?"Guardando...":"Guardar"})})]})})]})}export{U as default};
